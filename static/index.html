<head>
  <title>Fast Landing Page</title>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no" />
</head>

<body>
  <form class="theForm">
    <input type="text" id="jsData" />
    <label>Send API</label>
    <input type="button" class="btn" />
  </form>
</body>

<script>
  const fetchForm = document.querySelector(".theForm");
  const btn = document.querySelector(".btn")

  const postFetch = () => {
    let formData = new FormData(fetchForm);

  
    
    fetch('/api/v1/parseJson', {　 // 送信先URL
      method: 'post', // 通信メソッド
      header: {
        'Content-Type': 'application/json' // JSON形式のデータのヘッダー
      },
      body: formData // JSON形式のデータ
    })
      .then(response => response.text())
      .then(formData => {
        console.log(formData);
      })
  };
  
  btn.addEventListener('click', postFetch, false);

/*
  const getFormJSON = (form) => {
    const data = new FormData(form);
    return Array.from(data.keys()).reduce((result, key) => {
      result[key] = data.get(key);
      return result;
    }, {});
  };

  document.addEventListener("DOMContentLoaded", function () {
    let theForm = document.querySelector("theForm");
    let output = document.getElementById("output");
    
    theForm.addEventListener("submit", function(e){
      e.preventDefault()

      let data = document.getElementById('jsData')

      console.log('///////////////////////////')
      let fd = new FormData(theForm);
      fd.append('data', JSON.stringify(data));
  
      fetch('/', {　 // 送信先URL
        method: 'post', // 通信メソッド
        header: {
          'Content-Type': 'application/json' // JSON形式のデータのヘッダー
        },
        body: fd // JSON形式のデータ
      })
        .then(response => response.text())
        .then(fd => {
          console.log(fd);
        })
    })
  })

*/
</script>


</html>